<!--
 ~ Copyright 2022 youngmonkeys.org
 ~
 ~ Licensed under the ezyplatform, Version 1.0.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     https://youngmonkeys.org/licenses/ezyplatform-1.0.0.txt
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
-->

<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="content">
    <div class="modal fade pt-4rem" id="nearby-provinces">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="nearby-provinces-modal-title">
                        [[#{nearby_provinces_of}]]
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ol id="nearByProvinces" class="max-height-380"></ol>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</th:block>
<script th:fragment="scripts" th:inline="javascript">
/*<![CDATA[*/
ezyadmin.messages.nearby_provinces_of = /*[[#{nearby_provinces_of}]]*/;
/*]]>*/
// ========== show update nearby province modal =============
ecommerce.showNearbyProvincesModal = function(
    countryId,
    provinceId,
    provinceDisplayName
) {
    $('#nearby-provinces-modal-title').text(
        ezyadmin.messages.nearby_provinces_of
            .replace('{0}', provinceDisplayName)
    );
    ezyadmin.showLoadingScreen();
    $.ajax({
        type: 'GET',
        url: '/ecommerce/api/v1/countries/' + countryId +
            '/provinces/' + provinceId + '/nearby',
        success: function (data) {
            ezyadmin.hideLoadingScreen();
            var html = '';
            data.forEach((province) => {
                if (province.selected) {
                    html += `<li>${province.displayName}</li>`;
                }
            });
            $('#nearByProvinces').html(html);
            $('#nearby-provinces').modal('show');
        },
        error: function (e) {
            ezyadmin.hideLoadingScreen();
            ezyadmin.processGetApiErrors(e);
        }
    });
}
</script>
</body>
</html>
